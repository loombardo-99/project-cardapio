<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardápio Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB; /* Cinza claro de fundo */
        }
        .menu-header {
            background-color: #4F46E5; /* Indigo-600 */
            color: white;
            padding: 2rem 1rem;
            text-align: center;
        }
        .menu-header h1 {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* bold */
            margin-bottom: 0.5rem;
        }
        .menu-header p {
            font-size: 1rem; /* text-base */
            color: #E0E7FF; /* Indigo-100 */
        }
        .category-title {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* semibold */
            color: #1F2937; /* Gray-800 */
            margin-top: 2.5rem; /* mt-10 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.75rem; /* pb-3 */
            border-bottom: 2px solid #D1D5DB; /* Gray-300 */
        }
        .product-card {
            background-color: white;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease-in-out;
        }
        .product-card:hover {
            transform: translateY(-4px);
        }
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .product-details {
            padding: 1.25rem; /* p-5 */
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .product-name {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* semibold */
            color: #111827; /* Gray-900 */
            margin-bottom: 0.5rem;
        }
        .product-description {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* Gray-500 */
            margin-bottom: 1rem;
            flex-grow: 1;
            line-height: 1.4;
        }
        .product-price {
            font-size: 1.125rem; /* text-lg */
            font-weight: 700; /* bold */
            color: #4F46E5; /* Indigo-600 */
            margin-top: auto; /* Alinha o preço na parte inferior se a descrição for curta */
        }
        .empty-menu {
            text-align: center;
            padding: 4rem 1rem;
            color: #6B7280; /* Gray-500 */
        }
        .empty-menu i {
            font-size: 3rem; /* text-5xl */
            margin-bottom: 1rem;
        }

        /* Estilos baseados no layout selecionado (simulação) */
        .layout-moderno-compacto .product-card { /* Exemplo */
            flex-direction: row;
            align-items: center;
        }
        .layout-moderno-compacto .product-image {
            width: 120px;
            height: 120px;
            min-width: 120px;
            border-radius: 0.375rem 0 0 0.375rem;
        }
         .layout-moderno-compacto .product-details {
            padding: 1rem;
        }

        .layout-fotos-destaque .product-image {
            height: 280px;
        }

    </style>
</head>
<body>
    <header id="menuHeader" class="menu-header">
        <h1 id="publicBusinessName">Nome do Seu Negócio</h1>
        <p id="publicBusinessSlogan">O seu cardápio online delicioso!</p>
    </header>

    <main class="container mx-auto px-4 md:px-6 py-8">
        <div id="publicMenuListContainer">
            <div class="empty-menu">
                <i class="fas fa-utensils"></i>
                <p class="text-xl">O cardápio está vazio ou ainda não foi carregado.</p>
                <p class="text-sm">Se você é o dono, <a href="adicionar-produtos.html" class="text-indigo-600 hover:underline">adicione itens ao seu cardápio</a>.</p>
            </div>
        </div>
    </main>

    <footer class="text-center py-8 mt-8 border-t border-gray-200">
        <p class="text-sm text-gray-500">
            Cardápio fornecido por <a href="index.html" class="text-indigo-600 hover:underline font-semibold">CardápioFácil</a>.
        </p>
        <p class="text-xs text-gray-400 mt-1">
            &copy; <span id="currentYear"></span> <span id="footerBusinessName">Nome do Seu Negócio</span>. Todos os direitos reservados.
        </p>
    </footer>

    <script>
        const publicBusinessNameEl = document.getElementById('publicBusinessName');
        const publicBusinessSloganEl = document.getElementById('publicBusinessSlogan'); // Placeholder
        const publicMenuListContainerEl = document.getElementById('publicMenuListContainer');
        const currentYearEl = document.getElementById('currentYear');
        const footerBusinessNameEl = document.getElementById('footerBusinessName');
        const menuHeaderEl = document.getElementById('menuHeader'); // Para aplicar estilos de layout

        let appData = {
            businessName: "Cardápio Online",
            menuSlug: "cardapio",
            selectedLayout: null // Ex: 'moderno-compacto', 'fotos-destaque'
        };
        let categories = [];
        let products = [];

        function loadPublicMenuData() {
            const storedQuizData = localStorage.getItem('quizDataGlobal');
            const storedCategories = localStorage.getItem('cardapioCategories');
            const storedProducts = localStorage.getItem('cardapioProducts');
            const storedSelectedLayout = localStorage.getItem('selectedLayoutIdGlobal');

            if (storedQuizData) {
                const quizData = JSON.parse(storedQuizData);
                appData.businessName = quizData.negocioNome || "Cardápio Online";
                appData.menuSlug = quizData.menuSlug || slugify(quizData.negocioNome || "cardapio");
                // Poderia adicionar um campo para slogan no quiz
            }
            if (storedCategories) {
                categories = JSON.parse(storedCategories);
            }
            if (storedProducts) {
                products = JSON.parse(storedProducts);
            }
            if (storedSelectedLayout) {
                appData.selectedLayout = storedSelectedLayout;
            }

            document.title = `Cardápio - ${appData.businessName}`;
            publicBusinessNameEl.textContent = appData.businessName;
            footerBusinessNameEl.textContent = appData.businessName;
            currentYearEl.textContent = new Date().getFullYear();

            // Aplicar classe de layout ao corpo ou a um contêiner principal para estilização condicional
            if (appData.selectedLayout) {
                document.body.classList.add(`layout-${appData.selectedLayout}`);
            }
        }
        
        function slugify(text) { // Função auxiliar caso não venha do quizData
             return text.toString().toLowerCase()
                .replace(/\s+/g, '-')
                .replace(/[^\w\-]+/g, '')
                .replace(/\-\-+/g, '-')
                .replace(/^-+/, '')
                .replace(/-+$/, '');
        }

        function renderPublicMenu() {
            publicMenuListContainerEl.innerHTML = ''; // Limpa o conteúdo anterior

            if (categories.length === 0 || products.length === 0) {
                publicMenuListContainerEl.innerHTML = `
                    <div class="empty-menu">
                        <i class="fas fa-folder-open"></i>
                        <p class="text-xl font-semibold">Este cardápio ainda está em construção!</p>
                        <p class="text-sm">Volte em breve para conferir as novidades.</p>
                    </div>`;
                return;
            }

            categories.forEach(category => {
                const productsInCategory = products.filter(p => p.categoryId === category.id);
                if (productsInCategory.length === 0) return; // Não renderiza categoria sem produtos

                const categoryTitleEl = document.createElement('h2');
                categoryTitleEl.className = 'category-title';
                categoryTitleEl.textContent = category.name;
                publicMenuListContainerEl.appendChild(categoryTitleEl);

                const productGridEl = document.createElement('div');
                // Ajustar o grid com base no layout, se necessário
                let gridClasses = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6';
                if (appData.selectedLayout === 'moderno-compacto') {
                    gridClasses = 'grid grid-cols-1 gap-4'; // Exemplo: layout compacto usa uma coluna
                }
                productGridEl.className = gridClasses;

                productsInCategory.forEach(product => {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'product-card';

                    const imageEl = document.createElement('img');
                    imageEl.src = product.image || 'https://placehold.co/600x400/E0E7FF/4338CA?text=Prato+Delicioso';
                    imageEl.alt = product.name;
                    imageEl.className = 'product-image';

                    const detailsEl = document.createElement('div');
                    detailsEl.className = 'product-details';

                    const nameEl = document.createElement('h3');
                    nameEl.className = 'product-name';
                    nameEl.textContent = product.name;

                    const descriptionEl = document.createElement('p');
                    descriptionEl.className = 'product-description';
                    descriptionEl.textContent = product.description || 'Delicioso item do nosso cardápio.';

                    const priceEl = document.createElement('p');
                    priceEl.className = 'product-price';
                    priceEl.textContent = `R$${parseFloat(product.price).toFixed(2)}`;

                    detailsEl.appendChild(nameEl);
                    detailsEl.appendChild(descriptionEl);
                    detailsEl.appendChild(priceEl);

                    cardEl.appendChild(imageEl);
                    cardEl.appendChild(detailsEl);
                    productGridEl.appendChild(cardEl);
                });
                publicMenuListContainerEl.appendChild(productGridEl);
            });
        }

        // Inicialização
        loadPublicMenuData();
        renderPublicMenu();

    </script>
</body>
</html>
